# Changelog

本文件基于项目的 Git 提交历史整理，用于记录 EuNet 在开发过程中的主要功能演进、重构过程与问题修复情况。  
所有内容均来源于实际提交记录，按时间顺序归档。

---

## 2026-01-04

### 修复（Fix）
- 修复 TUI 代码中存在的显示与逻辑错误
- 修复请求终止后事件未正确调度的问题
- 修复对端关闭连接时未能正确上报错误的情况

### 新增（Feature）
- 支持请求终止后的事件调度流程
- 为对端关闭行为补充错误语义处理
- 事件快照中的错误字段调整为可选项，避免无错误场景下的冗余状态

### 测试（Test）
- 翻新并补充单元测试，覆盖事件处理、状态机与连接相关逻辑

---

## 2026-01-03

### 新增（Feature）
- 引入 Boost 库并更新 HTTP 请求实现
- 使用新版错误模型更新现有实现
- 完善 TCP 客户端消息输出
- 提供更完整的错误模型与错误分类接口
- 更新事件类型到字符串的映射逻辑
- 提供更详细的 TUI 展示信息与页面布局
- 为 TCP 连接提供套接字访问接口
- 恢复 UDP 连接实现并补充对应功能

### 重构（Refactor）
- 重构 HTTP 相关数据结构路径
- 重构网络连接与套接字基类以适配当前实现
- 移除不必要的第三方库依赖
- 调整 TCP 客户端等待时间参数
- 更改对端关闭时的错误信息描述
- 移除 TUI 中的输入框，简化交互流程
- 调整状态格式化接口的返回类型
- 恢复 UDP 连接实现并清理历史遗留代码

### 修复（Fix）
- 修复 TCP 客户端阻塞语义不明确的问题
- 修复传输结束后对端未正确关闭的问题
- 修复命令行无参数启动时程序异常的问题
- 修复报错信息越界的问题
- 修复套接字内部计数越界的边界异常

### 测试（Test）
- 多次翻新并补充单元测试，覆盖 TCP / UDP 连接、消息队列及错误模型
- 恢复 UDP 连接相关单元测试

### 文档（Docs）
- 更新项目文档构建教程

---

## 2026-01-02

### 新增（Feature）
- 恢复 TCP 连接实现
- 为字节缓冲区提供更弱检查接口，提升使用灵活性
- 完善消息队列枚举类型
- 新增错误类型分类获取接口
- 完成 DNS 解析模块相关功能

### 重构（Refactor）
- 重构网络连接基类以适配套接字实现
- 移除连接对旧读写缓冲区的依赖

### 测试（Test）
- 恢复 TCP 连接单元测试
- DNS 解析测试通过

---

## 2026-01-01

### 新增（Feature）
- 新增 TCP 套接字连接对端接口
- 添加 TCP 套接字阻塞接口并修复缓冲区漏洞
- 添加对端主动关闭的错误语义
- 补充消息队列事件检查接口
- 进一步完善统一 IO 协程上下文
- 完善消息队列与 FD 视图接口设计

### 重构（Refactor）
- 套接字实现统一为阻塞模型
- 移除 TCP 套接字的旧阻塞接口
- 移除 IO 协程上下文的历史实现
- 将获取对端信息的逻辑提升至套接字基类
- 调整 UDP 套接字实现，仅支持阻塞版本
- 暂时注释 UDP 套接字部分实现以配合整体重构

### 修复（Fix）
- 修复消息队列中 FD 多次添加导致的边界异常

### 测试（Test）
- TCP 套接字测试通过
- UDP 套接字测试通过
- 提高 TCP 套接字测试的超时时限
- 单元测试对接新版消息队列接口验证通过
